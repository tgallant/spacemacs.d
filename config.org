* Emacs Configuration
** General
*** Set Window Size
#+begin_src emacs-lisp
  (setq initial-frame-alist '((top . 30) (left . 30) (width . 125) (height . 45)))
#+end_src
*** Info Path
#+begin_src emacs-lisp
  (defun add-local-info-dir ()
    (info-initialize)
    (add-to-list 'Info-directory-list "~/info"))

  (eval-after-load "info"
    '(progn
       (if (file-directory-p "~/info")
           (add-dir-local-variable))))
#+end_src
*** Tabs/Spaces
#+begin_src emacs-lisp
  (defun handle-tab-exceptions ()
    (if (and buffer-file-name
             (not (string-equal mode-name "Makefile")))
        (setq indent-tabs-mode nil)))

  (add-hook 'find-file-hook 'handle-tab-exceptions)
#+end_src
** Org
*** Basic
**** Set Base Org Folder
#+begin_src emacs-lisp
  (with-eval-after-load 'org
    (setq org-agenda-files '("~/org")))
#+end_src
*** Add project TODOs to Agenda
#+begin_src emacs-lisp
  (with-eval-after-load 'org-agenda
    (require 'org-projectile)
    (mapcar #'(lambda (file)
               (when (file-exists-p file)
                 (push file org-agenda-files)))
            (org-projectile-todo-files)))
#+end_src
** Magit
*** Undo last commit
#+begin_src emacs-lisp
  (defun undo-last-commit ()
    (interactive)
    (magit-reset-soft "HEAD^"))
  
  (transient-append-suffix 'magit-reset "w"
    '("u" "undo" undo-last-commit))
#+end_src
*** Stage and commit each unstaged file
#+begin_src emacs-lisp
  (defun stage-and-commit-file (file)
    (magit-stage-file file)
    (magit-run-git "commit" "-m" file))
  
  (defun commit-each-unstaged-file ()
    "Stage and commit each file returned by magit-unstaged-files"
    (interactive)
    (dolist (file (magit-unstaged-files))
      (stage-and-commit-file file)))
  
  (transient-append-suffix 'magit-commit "c"
    '("E" "Commit each unstaged file" commit-each-unstaged-file))
#+end_src
